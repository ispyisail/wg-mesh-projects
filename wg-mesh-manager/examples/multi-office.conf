# Example: Multi-Office Business Network
# Five office locations with centralized management

# ============================================================================
# NETWORK DESIGN
# ============================================================================
#
# Mesh Network: 10.50.0.0/24
#
# Location       Mesh IP      LAN Subnet         Endpoint
# --------       -------      ----------         --------
# HQ             10.50.0.1    172.16.1.0/24      hq.company.com:51820
# NYC Office     10.50.0.2    172.16.2.0/24      nyc.company.com:51820
# LA Office      10.50.0.3    172.16.3.0/24      la.company.com:51820
# London         10.50.0.4    172.16.4.0/24      london.company.com:51820
# Tokyo          10.50.0.5    172.16.5.0/24      tokyo.company.com:51820
#
# Mobile Users: 10.50.0.100-199
#
# ============================================================================

# ----------------------------------------------------------------------------
# HEADQUARTERS ROUTER (Primary Node)
# ----------------------------------------------------------------------------
# Commands:

# mesh-init --name company-mesh --subnet 10.50.0.0/24

# Add HQ (self)
# mesh-add hq fixed 10.50.0.1/24 hq.company.com:51820 \
#     --public-key $(cat /etc/wg-mesh/keys/publickey) \
#     --allowed-ips "10.50.0.1/32,172.16.1.0/24" \
#     --description "Headquarters"

# Add branch offices
# mesh-add nyc fixed 10.50.0.2/24 nyc.company.com:51820 \
#     --public-key <NYC_PUBKEY> \
#     --allowed-ips "10.50.0.2/32,172.16.2.0/24" \
#     --description "New York Office"

# mesh-add la fixed 10.50.0.3/24 la.company.com:51820 \
#     --public-key <LA_PUBKEY> \
#     --allowed-ips "10.50.0.3/32,172.16.3.0/24" \
#     --description "Los Angeles Office"

# mesh-add london fixed 10.50.0.4/24 london.company.com:51820 \
#     --public-key <LONDON_PUBKEY> \
#     --allowed-ips "10.50.0.4/32,172.16.4.0/24" \
#     --description "London Office"

# mesh-add tokyo fixed 10.50.0.5/24 tokyo.company.com:51820 \
#     --public-key <TOKYO_PUBKEY> \
#     --allowed-ips "10.50.0.5/32,172.16.5.0/24" \
#     --description "Tokyo Office"

# ----------------------------------------------------------------------------
# MOBILE USERS (Example: CEO Laptop)
# ----------------------------------------------------------------------------

# mesh-add ceo-laptop dhcp 10.50.0.100/24 dynamic \
#     --public-key <CEO_LAPTOP_PUBKEY> \
#     --description "CEO Laptop"

# Generate config for CEO laptop:
# [Interface]
# PrivateKey = <CEO_PRIVATE_KEY>
# Address = 10.50.0.100/24
# DNS = 10.50.0.1
#
# [Peer]
# PublicKey = <HQ_PUBKEY>
# Endpoint = hq.company.com:51820
# AllowedIPs = 10.50.0.0/24, 172.16.0.0/16
# PersistentKeepalive = 25

# ============================================================================
# FIREWALL RULES (Example for OpenWrt)
# ============================================================================
#
# # Allow WireGuard traffic
# uci add firewall rule
# uci set firewall.@rule[-1].name='Allow-WireGuard'
# uci set firewall.@rule[-1].src='wan'
# uci set firewall.@rule[-1].dest_port='51820'
# uci set firewall.@rule[-1].proto='udp'
# uci set firewall.@rule[-1].target='ACCEPT'
# uci commit firewall
#
# # Create mesh zone
# uci add firewall zone
# uci set firewall.@zone[-1].name='mesh'
# uci set firewall.@zone[-1].input='ACCEPT'
# uci set firewall.@zone[-1].output='ACCEPT'
# uci set firewall.@zone[-1].forward='ACCEPT'
# uci set firewall.@zone[-1].network='wg_mesh'
# uci commit firewall
#
# /etc/init.d/firewall restart
#
# ============================================================================

# ============================================================================
# MONITORING
# ============================================================================
#
# Run on each site:
#   mesh-health
#   mesh-status --watch
#   mesh-stats
#
# Set up alerts for handshake failures > 5 minutes
#
# ============================================================================
